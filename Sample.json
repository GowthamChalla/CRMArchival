{ 
"$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",  
"contentVersion": "1.0.0.0", 
"parameters": 
    {    
       "CRMUsername":
        {      
           "type": "String",      
           "metadata": { "description": "Enter the CRM User name which will be used to login to CRM having admin privileges" }
        },    
        "CRMPassword": 
        {      "type": "SecureString",      
               "metadata": { "description": "Enter the Password of the CRM User name" }    
        },    
        "CRMResourceUrl": 
        {      "type": "String",      
                "metadata": { "description": "CRM url e.g., https://xxxx.crm.dynamics.com" }   
        },    
        "webSiteName": 
        {      "type": "String",      
               "defaultValue": "D365ArchivalWebApp",      
               "metadata": { "description": "Enter the name you wish to give to the App Service, Do not enter the name that already exists." }    
        },    
        "keyVaultName": 
        {      "type": "String",      
               "defaultValue": "d365archivalkeyvault",      
               "metadata": { "description": "Enter the name you wish to give to the Key vault, Do not enter the name that already exists." }    
        },    
        "databaseAccountName": 
        {      "type": "String",      
               "defaultValue": "d365archivalcosmosdbacc",      
               "metadata": { "description": "Enter the name you wish to give to the COSMOS DB account, Do not enter the name that already exists." }    
        },    
        "storageAccountName": 
        {      "type": "String",      
               "defaultValue": "d365archivalstorageacc",      
               "metadata": { "description": "Enter the name you wish to give to the Storage account, Do not enter the name that already exists." }    
        },    
        "ThreadCount": 
        {      "defaultValue": "50",      
               "type": "String",      
               "metadata": { "description": "Enter the number of threads to be used for Archival (Degree of Parallelism), Recommended is 50 threads" }    
        },   
        "KeyVaultApplicationId": 
        {      "type": "String",      
               "metadata": { "description": "Enter the Application Id of the Web app app that is registered in Azure Active Directory" }    
        },    
        "SecretKey": 
        { "type": "SecureString" 
        },   
        "ObjectId": 
        { "type": "String" 
        },    
        "NativeApplicationId": 
        { "type": "String" 
        },    
        "hostingPlanName": 
        {      "minLength": 1,      
               "type": "String",      
               "defaultValue": "D365ArchivalAppPlan"    
        },    
        "CRMWebAPIVersion": 
        {      "defaultValue": "8.1",      
               "allowedValues": [ "8.1", "8.2", "9.0" ],      
               "type": "String",      
               "metadata": { "description": "Select the version of CRM online that you are using" }    
        },    
        "skuName": 
        {      "defaultValue": "S3",      
                "allowedValues": [ "B1", "B2", "B3", "S1", "S2", "S3", "P1", "P2", "P3", "P4" ],      
                "type": "String",      
                "metadata": { "description": "Describes plan's pricing tier and instance size. Check details at https://azure.microsoft.com/en-us/pricing/details/app-service/" }    
        },    
        "skuCapacity": 
        {      "defaultValue": 1,      
               "minValue": 1,      
               "type": "Int",      
               "metadata": { "description": "Describes plan's instance count" }    
        },    
        "storageaccountType": 
        {      "defaultValue": "Standard_LRS",      
               "allowedValues": [ "Standard_LRS", "Standard_ZRS", "Standard_GRS", "Standard_RAGRS", "Premium_LRS" ],     
               "type": "String"    
        }  
    },  
    "variables": 
    {    
        "webSiteName": "[parameters('webSiteName')]",    
        "storageaccountName": "[parameters('storageAccountName')]",    
        "KeyVaultName": "[parameters('keyVaultName')]"  
    },  
    "resources": 
    [    
      {      
      "type": "Microsoft.DocumentDB/databaseAccounts",      
      "name": "[parameters('databaseAccountName')]",      
      "apiVersion": "2015-04-08",      
      "location": "[resourceGroup().location]",      
      "properties": 
          {        
             "name": "[parameters('databaseAccountName')]",        
             "databaseAccountOfferType": "Standard"      
          }    
       },    
    ]
}
