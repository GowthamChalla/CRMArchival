{
  "$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "KeyVaultName": {
      "type": "string",
      "defaultValue": "l2skeyvault1"
    },
    "WebAPIObjectId": {
      "type": "string",
      "defaultValue": "a1a8ed7a-b2da-47a4-83eb-a4d67483d2f2"
    },
    "L2sdbConnectionString": {
      "type": "string",
      "defaultValue": "l2sdbconnectionstring"
    },
    "CosmicClientId": {
      "type": "string",
      "defaultValue": "5e66d153-0c9e-49ff-a368-ae757f3288d0"
    },
    "CosmicClientSecret": {
      "type": "securestring",
      "defaultValue": "zODyxgbBytiKZ1b5uYBQp9ZvXeaQDseCzyLNI3pyEWY="
    },
    "CosmicAPIResource": {
      "type": "string",
      "defaultValue": "https://cosmicwebapiuat.azurewebsites.net"
    },
    "CosmicBaseUri": {
      "type": "string",
      "defaultValue": "https://cosmicwebapiuat.azurewebsites.net"
    },
    "MsxAPIUser": {
      "type": "string",
      "defaultValue": "qbek2svc@microsoft.com"
    },
    "MsxApiPasswd": {
      "type": "securestring",
      "defaultValue": "November0718@Updat"
    },
    "MsxAPIRoot": {
      "type": "string",
      "defaultValue": "https://msitsalesapi.azure-api.net/"
    },
    "MsxAzureApiKey": {
      "type": "string",
      "defaultValue": "d2c99409abb54b1b887e978b4a43fe31"
    },
    "MsxAudienceUri": {
      "type": "string",
      "defaultValue": "https://L2OAzureServices/"
    },
    "MsxDSClientID": {
      "type": "string",
      "defaultValue": "89944825-3061-4ebe-bd2d-ccc8a10b61cc"
    },
    "MsxRealmUri": {
      "type": "string",
      "defaultValue": "https://msitsalesds-us-prod.cloudapp.net/"
    }
  },
  "variables": {},
  "resources": [
    {
      "type": "Microsoft.KeyVault/vaults",
      "name": "[parameters('KeyVaultName')]",
      "apiVersion": "2015-06-01",
      "location": "[resourceGroup().location]",
      "tags": {
        "displayName": "KeyVault"
      },
      "properties": {
        "tenantId": "[subscription().tenantId]",
        "accessPolicies": [
          {
            "tenantId": "[subscription().tenantId]",
            "objectId": "[parameters('WebAPIObjectId')]",
            "permissions": {
              "keys": [ "all" ],
              "secrets": [ "all" ]
            }
          }
        ],
        "enabledForTemplateDeployment": true,
        "sku": {
          "name": "Standard",
          "family": "A"
        }
      }
    },
    {
      "type": "Microsoft.KeyVault/vaults/secrets",
      "name": "[concat(parameters('KeyVaultName'), '/','L2sdbConnectionString')]",
      "apiVersion": "2015-06-01",
      "properties": {
        "contentType": "text/plain",
        "value": "[parameters('L2sdbConnectionString')]"
      },
      "dependsOn": [ "[concat('Microsoft.KeyVault/vaults/', parameters('KeyVaultName'))]" ]
    },
    {
      "type": "Microsoft.KeyVault/vaults/secrets",
      "name": "[concat(parameters('KeyVaultName'), '/','CosmicClientId')]",
      "apiVersion": "2015-06-01",
      "properties": {
        "contentType": "text/plain",
        "value": "[parameters('CosmicClientId')]"
      },
      "dependsOn": [ "[concat('Microsoft.KeyVault/vaults/', parameters('KeyVaultName'))]" ]
    },
    {
      "type": "Microsoft.KeyVault/vaults/secrets",
      "name": "[concat(parameters('KeyVaultName'), '/','CosmicClientSecret')]",
      "apiVersion": "2015-06-01",
      "properties": {
        "contentType": "text/plain",
        "value": "[parameters('CosmicClientSecret')]"
      },
      "dependsOn": [ "[concat('Microsoft.KeyVault/vaults/', parameters('KeyVaultName'))]" ]
    },
    {
      "apiVersion": "2015-06-01",
      "dependsOn": [ "[concat('Microsoft.KeyVault/vaults/', parameters('KeyVaultName'))]" ],
      "name": "[concat(parameters('KeyVaultName'), '/','CosmicAPIResource')]",
      "properties": {
        "contentType": "text/plain",
        "value": "[parameters('CosmicAPIResource')]"
      },
      "type": "Microsoft.KeyVault/vaults/secrets"
    },
    {
      "apiVersion": "2015-06-01",
      "dependsOn": [ "[concat('Microsoft.KeyVault/vaults/', parameters('KeyVaultName'))]" ],
      "name": "[concat(parameters('KeyVaultName'), '/','CosmicBaseUri')]",
      "properties": {
        "contentType": "text/plain",
        "value": "[parameters('CosmicBaseUri')]"
      },
      "type": "Microsoft.KeyVault/vaults/secrets"
    },
    {
      "apiVersion": "2015-06-01",
      "dependsOn": [ "[concat('Microsoft.KeyVault/vaults/', parameters('KeyVaultName'))]" ],
      "name": "[concat(parameters('KeyVaultName'), '/','MsxAPIUser')]",
      "properties": {
        "contentType": "text/plain",
        "value": "[parameters('MsxAPIUser')]"
      },
      "type": "Microsoft.KeyVault/vaults/secrets"
    },
    {
      "apiVersion": "2015-06-01",
      "dependsOn": [ "[concat('Microsoft.KeyVault/vaults/', parameters('KeyVaultName'))]" ],
      "name": "[concat(parameters('KeyVaultName'), '/','MsxApiPasswd')]",
      "properties": {
        "contentType": "text/plain",
        "value": "[parameters('MsxApiPasswd')]"
      },
      "type": "Microsoft.KeyVault/vaults/secrets"
    },
    {
      "apiVersion": "2015-06-01",
      "dependsOn": [ "[concat('Microsoft.KeyVault/vaults/', parameters('KeyVaultName'))]" ],
      "name": "[concat(parameters('KeyVaultName'), '/','MsxAPIRoot')]",
      "properties": {
        "contentType": "text/plain",
        "value": "[parameters('MsxAPIRoot')]"
      },
      "type": "Microsoft.KeyVault/vaults/secrets"
    },
    {
      "apiVersion": "2015-06-01",
      "dependsOn": [ "[concat('Microsoft.KeyVault/vaults/', parameters('KeyVaultName'))]" ],
      "name": "[concat(parameters('KeyVaultName'), '/','MsxAzureApiKey')]",
      "properties": {
        "contentType": "text/plain",
        "value": "[parameters('MsxAzureApiKey')]"
      },
      "type": "Microsoft.KeyVault/vaults/secrets"
    },
    {
      "apiVersion": "2015-06-01",
      "dependsOn": [ "[concat('Microsoft.KeyVault/vaults/', parameters('KeyVaultName'))]" ],
      "name": "[concat(parameters('KeyVaultName'), '/','MsxAudienceUri')]",
      "properties": {
        "contentType": "text/plain",
        "value": "[parameters('MsxAudienceUri')]"
      },
      "type": "Microsoft.KeyVault/vaults/secrets"
    },
    {
      "apiVersion": "2015-06-01",
      "dependsOn": [ "[concat('Microsoft.KeyVault/vaults/', parameters('KeyVaultName'))]" ],
      "name": "[concat(parameters('KeyVaultName'), '/','MsxDSClientID')]",
      "properties": {
        "contentType": "text/plain",
        "value": "[parameters('MsxDSClientID')]"
      },
      "type": "Microsoft.KeyVault/vaults/secrets"
    },
    {
      "apiVersion": "2015-06-01",
      "dependsOn": [ "[concat('Microsoft.KeyVault/vaults/', parameters('KeyVaultName'))]" ],
      "name": "[concat(parameters('KeyVaultName'), '/','MsxRealmUri')]",
      "properties": {
        "contentType": "text/plain",
        "value": "[parameters('MsxRealmUri')]"
      },
      "type": "Microsoft.KeyVault/vaults/secrets"
    }
  ]
}